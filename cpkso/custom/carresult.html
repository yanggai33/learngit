<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
    <link rel="stylesheet" href="style/css/reset.css">
    <link rel="stylesheet" href="http://apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css">
	<link rel="stylesheet" href="style/css/base.css">
	<link rel="stylesheet" href="style/css/searchresult.css">
	<script src="http://apps.bdimg.com/libs/jquery/2.0.0/jquery.min.js"></script>
	<script type="text/javascript">
	!window.jQuery && document.write('<script src="style/js/lib/jquery-2.0.0.min.js"><\/script>');
	</script>
    <script type="text/javascript" src="style/js/lib/jquery.page.js"></script>
	<script type="text/javascript" src="http://apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="style/js/lib/enter.js"></script>
	<script type="text/javascript" src="style/js/lib/mustache.min.js"></script> 
	<title>车型库</title>
</head>
<body>
	<header class="header">
		<div class="header-left">
			<img src="style/img/search-logo.png" alt="logo">
		</div>
		<div class="header-right">
			<div class="search">
				<input onkeydown="entersearch();" class="search-input" type="text" placeholder="请输入车型名称" autocomplete="off">
				<a class="search-btn" href="javascript:;"></a>
			</div>
		</div>
	</header>
	<nav class="nav-wrapper">
		<ul class="nav-list">
			<li><a href="index.html">首页</a></li>
			<li><a href="news.html">资讯</a></li>
			<li class="active"><a href="carresult.html">车型库</a></li>
			<li><a href="partsresult.html">配件库</a></li>
			<li><a href="needmsg.html">供求信息</a></li>
			<li><a href="enterprise.html">企业库</a></li>
			<li><a href="http://www.cpkso.com" target="_blank">返回产品快搜</a></li>
			<li><a href="http://www.cpkso.cn" target="_blank">在线支付</a></li>
		</ul>
	</nav>
	<div class="product-head-nav">
		<ol class="breadcrumb">
			<span class="location">当前位置：</span>
			<li><a href="index.html">首页</a></li>
			<!-- <li><a href="carresult.html">车型库</a></li> -->
			<li class="active">车型库</li>
		</ol>
	</div>
	<div class="main-body">
		<div id="filter" class="category">
			<div id="categoryBrand" class="category-list clearfix">
				<dt class="title">品牌：</dt>
				<a class="choose-all choose-on" href="javascript:;">不限</a>
				<div id="firstLetters" class="brand-ident">
					<ul>
						<!-- <li><a href="#hot" data-toggle="enter">热门<span></span></a></li> -->
						<li class="active"><a onclick="return false;" href="#brandA" data-toggle="enter">A<span></span></a></li>
						<li><a onclick="return false;" href="#brandB" data-toggle="enter">B<span></span></a></li>
						<li><a onclick="return false;" href="#brandC" data-toggle="enter">C<span></span></a></li>
						<li><a onclick="return false;" href="#brandD" data-toggle="enter">D<span></span></a></li>
						<li><a onclick="return false;" href="#brandE" data-toggle="enter">E<span></span></a></li>
						<li><a onclick="return false;" href="#brandF" data-toggle="enter">F<span></span></a></li>
						<li><a onclick="return false;" href="#brandG" data-toggle="enter">G<span></span></a></li>
						<li><a onclick="return false;" href="#brandH" data-toggle="enter">H<span></span></a></li>
						<li><a onclick="return false;" href="#brandI" data-toggle="enter">I<span></span></a></li>
						<li><a onclick="return false;" href="#brandJ" data-toggle="enter">J<span></span></a></li>
						<li><a onclick="return false;" href="#brandK" data-toggle="enter">K<span></span></a></li>
						<li><a onclick="return false;" href="#brandL" data-toggle="enter">L<span></span></a></li>
						<li><a onclick="return false;" href="#brandM" data-toggle="enter">M<span></span></a></li>
						<li><a onclick="return false;" href="#brandN" data-toggle="enter">N<span></span></a></li>
						<li><a onclick="return false;" href="#brandO" data-toggle="enter">O<span></span></a></li>
						<li><a onclick="return false;" href="#brandP" data-toggle="enter">P<span></span></a></li>
						<li><a onclick="return false;" href="#brandQ" data-toggle="enter">Q<span></span></a></li>
						<li><a onclick="return false;" href="#brandR" data-toggle="enter">R<span></span></a></li>
						<li><a onclick="return false;" href="#brandS" data-toggle="enter">S<span></span></a></li>
						<li><a onclick="return false;" href="#brandT" data-toggle="enter">T<span></span></a></li>
						<li><a onclick="return false;" href="#brandU" data-toggle="enter">U<span></span></a></li>
						<li><a onclick="return false;" href="#brandV" data-toggle="enter">V<span></span></a></li>
						<li><a onclick="return false;" href="#brandW" data-toggle="enter">W<span></span></a></li>
						<li><a onclick="return false;" href="#brandX" data-toggle="enter">X<span></span></a></li>
						<li><a onclick="return false;" href="#brandY" data-toggle="enter">Y<span></span></a></li>
						<li><a onclick="return false;" href="#brandZ" data-toggle="enter">Z<span></span></a></li>
					</ul>
				</div>
				<div class="tab-content"  id="tabcontent">
					<!-- <div class="tab-pane  brand-list" id="hot">
						<a href="">奥迪</a>
						<a href="">ARASH</a>
					</div> -->
					<div class="tab-pane brand-list active" id="brandA">
					</div>
					
					<div class="tab-pane brand-list" id="brandB">
					</div>
					<div class="tab-pane brand-list" id="brandC">
					</div>
					<div class="tab-pane brand-list" id="brandD">
					</div>
					<div class="tab-pane brand-list" id="brandE">
					</div>
					<div class="tab-pane brand-list" id="brandF">
					</div>
					<div class="tab-pane brand-list" id="brandG">
					</div>
					<div class="tab-pane brand-list" id="brandH">
					</div>
					<div class="tab-pane brand-list" id="brandI">
					</div>
					<div class="tab-pane brand-list" id="brandJ">
					</div>
					<div class="tab-pane brand-list" id="brandK">
					</div>
					<div class="tab-pane brand-list" id="brandL">
					</div>
					<div class="tab-pane brand-list" id="brandM">
					</div>
					<div class="tab-pane brand-list" id="brandN">
					</div>
					<div class="tab-pane brand-list" id="brandO">
					</div>
					<div class="tab-pane brand-list" id="brandP">
					</div>
					<div class="tab-pane brand-list" id="brandQ">
					</div>
					<div class="tab-pane brand-list" id="brandR">
					</div>
					<div class="tab-pane brand-list" id="brandS">
					</div>
					<div class="tab-pane brand-list" id="brandT">
					</div>
					<div class="tab-pane brand-list" id="brandU">
					</div>
					<div class="tab-pane brand-list" id="brandV">
					</div>
					<div class="tab-pane brand-list" id="brandW">
					</div>
					<div class="tab-pane brand-list" id="brandX">
					</div>
					<div class="tab-pane brand-list" id="brandY">
					</div>
					<div class="tab-pane brand-list" id="brandZ">
					</div>
				</div>
			</div>
			<dl id="categoryPrice" class="category-list clearfix">
				<dt class="title">价格：</dt>
				<dd class="category-item">
					<a class="choose-on choose-all" data-value="" href="javascript:;">不限</a>
					<a data-id="carCondition.price" data-value="1" href="javascript:;">10万以下</a>
					<a data-id="carCondition.price" data-value="2" href="javascript:;">10-20万</a>
					<a data-id="carCondition.price" data-value="3" href="javascript:;">20-30万</a>
					<a data-id="carCondition.price" data-value="4" href="javascript:;">30-50万</a>
					<a data-id="carCondition.price" data-value="5" href="javascript:;">50万以上</a>
				</dd>
			</dl>
			<dl id="categoryType" class="category-list clearfix">
				<dt class="title">类型：</dt>
				<dd class="category-item">
					<a class="choose-all choose-on" data-value="" href="javascript:;">不限</a>
					<a data-id="carCondition.energy_type" data-value="低速电动车" href="javascript:;">低速电动车</a>
					<a data-id="carCondition.energy_type" data-value="纯电动" href="javascript:;">纯电动</a>
					<a data-id="carCondition.energy_type" data-value="插电式" href="javascript:;">插电式</a>
					<a data-id="carCondition.energy_type" data-value="增程式" href="javascript:;">增程式</a>
					<a data-id="carCondition.energy_type" data-value="混合动力" href="javascript:;">混合动力</a>
					<a data-id="carCondition.energy_type" data-value="燃料电池" href="javascript:;">燃料电池</a>
				</dd>
			</dl>
			<dl id="categoryMile" class="category-list  clearfix">
				<dt class="title">续航：</dt>
				<dd class="category-item ">
					<a class="choose-all choose-on" data-value="" href="javascript:;">不限</a>
					<a data-id="carCondition.mile" data-value="1" href="javascript:;">100公里以下</a>
					<a data-id="carCondition.mile" data-value="2" href="javascript:;">100-200公里</a>
					<a data-id="carCondition.mile" data-value="3" href="javascript:;">200-300公里</a>
					<a data-id="carCondition.mile" data-value="4" href="javascript:;">300-400公里</a>
					<a data-id="carCondition.mile" data-value="5" href="javascript:;">400公里以上</a>
				</dd>
			</dl>
			<dl id="categoryLevel" class="category-list rank clearfix ">
				<dt class="title">级别：</dt>
				<dd class="category-item">
					<a class="choose-all choose-on" data-value="" href="javascript:;">不限</a>
					<a data-id="carCondition.level" data-value="微型" href="javascript:;">微型</a>
					<a data-id="carCondition.level" data-value="小型" href="javascript:;">小型</a>
					<a data-id="carCondition.level" data-value="紧凑型" href="javascript:;">紧凑型</a>
					<a data-id="carCondition.level" data-value="中型" href="javascript:;">中型</a>
					<a data-id="carCondition.level" data-value="中大型" href="javascript:;">中大型</a>
					<a data-id="carCondition.level" data-value="豪华型" href="javascript:;">豪华型</a>
					<a data-id="carCondition.level" data-value="SUV" href="javascript:;">SUV</a>
					<a data-id="carCondition.level" data-value="MPV" href="javascript:;">MPV</a>
					<a data-id="carCondition.level" data-value="跑车" href="javascript:;">跑车</a>
					<a data-id="carCondition.level" data-value="商用" href="javascript:;">商用</a>
				</dd>
			</dl>
		</div>
		<div class="content-container car-search-result">
			<div class="content-left">
				<div id="car-result" class="search-result product-container">
				</div>
				<div class="page-wrapper">
					<div class="pagination"></div>
				</div>
			</div>
			<div class="content-right">
				<div id="showBar1" class="show-bar-sm">
				</div>
				<div class="info-container">
					<ul class="nav nav-tabs">
						<li class="active">
							<a href="#car-news" data-toggle="tab">行业新闻</a>
						</li>
						<li>
							<a href="#policy" data-toggle="tab">政策法规</a>
						</li>
					</ul>
					<div class="tab-content">
						<div class="tab-pane active" id="car-news">
						</div>
						<div class="tab-pane" id="policy"></div>
					</div>
				</div>
				<div id="showBar2" class="show-bar-sm">
				</div>
				<div class="info-container">
					<ul class="nav nav-tabs">
						<li class="active">
							<a href="#guide" data-toggle="tab">车辆导购</a>
						</li>
						<li>
							<a href="#tips" data-toggle="tab">用车贴士</a>
						</li>
					</ul>
					<div class="tab-content">
						<div class="tab-pane active" id="guide">
						</div>
						<div class="tab-pane" id="tips"></div>
					</div>
				</div>
				<div id="showBar3" class="show-bar-sm">
				</div>
			</div>
		</div>
		<div class="cut-line"></div>
	</div>
	<footer class="footer">
		<div class="footer-link">
			<a href="aboutus.html?id=aboutus">关于我们</a>
            <a href="aboutus.html?id=contactus">联系我们</a>
            <a href="aboutus.html?id=joinus">商务合作</a>
            <a href="aboutus.html?id=terms">服务条款</a>
            <a href="aboutus.html?id=sitemap">网站地图</a>
            <a href="http://www.cpkso.cn" target="_blank">在线付款</a>
		</div>
		<div class="site-info">
			<p class="footer-copyright">洛阳焦点信息科技有限公司版权所有</p>
			<p class="address">公司地址：河南省洛阳市洛龙区军威路1号6楼</p>
			<p class="tel">电话：0379-65171155</p>
		</div>
	</footer>
<script type="text/javascript">



$(function(){
	 $.ajax({
        url: 'ev/brand_listByInital',
        type: 'POST',
        dataType: 'json',
    })
    .done(function(data){
    	var data = data.response.data;
    	var tplA = '{{#a}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/a}}';
    	var tplB = '{{#b}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/b}}';
    	var tplC = '{{#c}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/c}}';
    	var tplD = '{{#d}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/d}}';
    	var tplE = '{{#e}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/e}}';
    	var tplF = '{{#f}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/f}}';
    	var tplG = '{{#g}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/g}}';
    	var tplH = '{{#h}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/h}}';
    	var tplI = '{{#i}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/i}}';
    	var tplJ = '{{#j}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/j}}';
    	var tplK = '{{#k}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/k}}';
    	var tplL = '{{#l}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/l}}';
    	var tplM = '{{#m}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/m}}';
    	var tplN = '{{#n}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/n}}';
    	var tplO = '{{#o}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/o}}';
    	var tplP = '{{#p}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/p}}';
    	var tplQ = '{{#q}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/q}}';
    	var tplR = '{{#r}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/r}}';
    	var tplS = '{{#s}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/s}}';
    	var tplT = '{{#t}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/t}}';
    	var tplU = '{{#u}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/u}}';
    	var tplV = '{{#v}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/v}}';
    	var tplW = '{{#w}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/w}}';
    	var tplX = '{{#x}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/x}}';
    	var tplY = '{{#y}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/y}}';
    	var tplZ = '{{#z}}<a href="javascript:;" data-id="carCondition.brand.id" data-value={{id}}>{{brand}}</a>{{/z}}';
		brandtplRender(tplA, $('#brandA'));
		brandtplRender(tplB, $('#brandB'));
		brandtplRender(tplC, $('#brandC'));
		brandtplRender(tplD, $('#brandD'));
		brandtplRender(tplE, $('#brandE'));
		brandtplRender(tplF, $('#brandF'));
		brandtplRender(tplG, $('#brandG'));
		brandtplRender(tplH, $('#brandH'));
		brandtplRender(tplI, $('#brandI'));
		brandtplRender(tplJ, $('#brandJ'));
		brandtplRender(tplK, $('#brandK'));
		brandtplRender(tplL, $('#brandL'));
		brandtplRender(tplM, $('#brandM'));
		brandtplRender(tplN, $('#brandN'));
		brandtplRender(tplO, $('#brandO'));
		brandtplRender(tplP, $('#brandP'));
		brandtplRender(tplQ, $('#brandQ'));
		brandtplRender(tplR, $('#brandR'));
		brandtplRender(tplS, $('#brandS'));
		brandtplRender(tplT, $('#brandT'));
		brandtplRender(tplU, $('#brandU'));
		brandtplRender(tplV, $('#brandV'));
		brandtplRender(tplW, $('#brandW'));
		brandtplRender(tplX, $('#brandX'));
		brandtplRender(tplY, $('#brandY'));
		brandtplRender(tplZ, $('#brandZ'));

		var url = window.location.search;

		chooseOn();
		function chooseOn(){
			var argObj = getArgs();
			$('.search-input').val(argObj['carCondition.car_name']);
			$('#filter').find('a[data-id]').each(function(){
				var id = $(this).attr('data-id');
				var value = $(this).attr('data-value');			
				var $this;
				for (var name in argObj){
					$this = $(this);
					if(id === name && value === argObj[name]){
				  		$this.parents('#categoryBrand').find('.choose-all').removeClass('choose-on');
				  		$this.siblings('a').removeClass('choose-on');
				  		$this.addClass('choose-on');
					} 
				};
			})
			var id = $('#categoryBrand').find('.choose-on').parents('.brand-list').attr('id');
			$('#firstLetters').find('a').each(function(){
				$this = $(this);
				if ($this.attr('href') === '#' + id) {
					$this.trigger('mouseenter');
				}
			})
		}


	    var postUrl = 'ev/car_search' + url;
		$.ajax({
	        url: postUrl,
	        type: 'POST',
	        dataType: 'json',
	    })
	    .done(function(data){
	    	refresh(data);       
	    });


        $("#filter .category-item a").click(function () {
            $(this).parents("dl").children("dd").each(function () {
				$('a',this).removeClass("choose-on");
            });

            $(this).addClass('choose-on');
			var results = RetSelecteds();
			renderPage(results);
        });
        $('#categoryBrand .choose-all').click(function() {
        	$("#tabcontent a").each(function(){
        		$(this).removeClass('choose-on');
        	})
			var results = RetSelecteds();
			renderPage(results);
        	$(this).addClass('choose-on');
        });
        $("#filter .brand-list a").click(function () {
            $('#categoryBrand').children("a").each(function () {
				$('#categoryBrand a').removeClass("choose-on");
            });

            $(this).addClass('choose-on');
			var results = RetSelecteds();
			renderPage(results);
        });

	    $('.search-btn').click(function(){
	    	var inputText = $('.search-input').val();
	    	var url = '?carCondition.car_name=' + inputText;
	    	location.search = url;
	    });



        function renderPage(args){
        	var url = '?' + args;
			location.search = url;
        }




	    function refresh(data){
	    	var cars = data.response.data.Cars;
	    	for (var i = 0; i < cars.length; i++) {
		    	cars[i].pic = cars[i].car.pic_thumbs[0];
		    	// cars[i].pic = cars[i].car.pics[0];
		    	cars[i].endurance = cars[i].car.params[0]?cars[i].car.params[0].mile:'';
		    	cars[i].speed = cars[i].car.params[0]?cars[i].car.params[0].max_speed:'';
		    	cars[i].logo = cars[i].car.brand?cars[i].car.brand.pic:'';
		    	cars[i].chargetime = cars[i].car.params[0]?cars[i].car.params[0].charging_time:'';
		    	cars[i].price = cars[i].car.params[0] && cars[i].car.params[0].price?'￥' + cars[i].car.params[0].price + '万':'暂无价格';
		    	cars[i].accelerate = cars[i].car.params[0]?cars[i].car.params[0].accelerate:'';
	    	}
			var resultTpl = '<ul class="list-content">{{#Cars}}<li class="list-item"><div class="figure"><a href="cardetail.html?id={{car.id}}"><img src="uploadPath/{{pic}}">{{#car.prompt}}<span class="recommend-icon"></span>{{/car.prompt}}</a>{{#logo}}<a href="javascript:;" class="car-logo"><img src="brandPath/{{logo}}"></a>{{/logo}}<div class="car-info"><div class="info-wrapper"><a href="cardetail.html?id={{car.id}}">详情</a><a href="javascript:;">客服</a><a href="{{#car.company.url}}{{car.company.url}}{{/car.company.url}}{{^car.company.url}}company.html?id={{car.company.id}}{{/car.company.url}}" target="_blank" rel="nofollow">官网</a></div><div class="car-detail"><ul class="detail-list"><li><p>续航里程：<span>{{endurance}}</span>km</p></li><li><p>最高时速：<span>{{speed}}</span>km/h</p></li><li><p>充电时间：<span>{{chargetime}}</span>h</p></li><li><p>百公里加速：<span>{{accelerate}}</span>s</p></li></ul></div></div></div><div class="detail"><a {{#car.w1}}style="text-indent: 26px;"{{/car.w1}} class="desc" href="cardetail.html?id={{car.id}}">{{#car.w1}}<span class="hot-icon"></span>{{/car.w1}}{{car.name}}</a><div class="company-detail"><a href="company.html?id={{car.company.id}}" class="company-name" target="_blank">{{car.company.name}}{{#car.company.vip}}<span class="approve-icon"></span>{{/car.company.vip}}</a></div><div class="msg"><p class="price"><span></span>{{price}}</p><p class="view-count">已浏览<span> {{car.hot}}</span></p></div></div></li>{{/Cars}}</ul>';
	        tplRender(resultTpl, data, $('#car-result'));
			var pageCount = data.response.data.Car_condition.maxPageNo;
			var pageNo = data.response.data.Car_condition.pageNo;
		    var currentPage = pageNo > pageCount ? pageCount : pageNo;
			$('.pagination').Mpage({
			    pageCount: pageCount /*resultData.condition.pageCount*/,
			    current: currentPage /*resultData.condition.currentPage*/,
			    mclick: function(p){
			    }
			});        
		    $('.prevPage').click(function(){
				$.ajax({
			        url: 'ev/car_prevPage',
			        type: 'POST',
			        dataType: 'json',
			    })
			    .done(function(data){
			    	refresh(data);
			    })
		    });

		    $('.nextPage').click(function(){
				$.ajax({
			        url: 'ev/car_nextPage',
			        type: 'POST',
			        dataType: 'json',
			    })
			    .done(function(data){
			    	refresh(data);
			    })
		    });
		    $('.pageNumber').click(function(){
		    	var num = $(this).text();
		    	var url = 'car_skipPage?carCondition.pageNo=' + num;
				$.ajax({
			        url: url,
			        type: 'POST',
			        dataType: 'json',
			    })
			    .done(function(data){
			    	refresh(data);
			    })
		    });
		    $('.page-submit').click(function(){
		    	var inputVal = $(this).siblings('.input-mini').val();
		    	var num = +inputVal > pageCount ? pageCount : +inputVal;
		    	if (typeof num !== 'number') {
		    		return false
		    	}
		    	var url = 'car_skipPage?carCondition.pageNo=' + num;
				$.ajax({
			        url: url,
			        type: 'POST',
			        dataType: 'json',
			    })
			    .done(function(data){
			    	refresh(data);
			    })
			})
	    };


	    function brandtplRender(tpl, el){
			var content = Mustache.render(tpl, data);
			el.html(content);
	    };


        function RetSelecteds() {
	        var result = "";
	        $("#filter a[class='choose-on']").each(function () {
	            result += $(this).attr('data-id') + '=' + $(this).attr('data-value') + '&';
	        });
	        return result;
	    };

    });

});






//侧边栏推荐
$(document).ready(function(){
	$.ajax({
        url: 'ev/placeCar_findByAdsUniqueId?ads_unique_id=LR01',
        type: 'POST',
        dataType: 'json',
    })
    .done(function(data){
        showbarsmRender(data, $('#showBar1'));
    });
	$.ajax({
        url: 'ev/placeCar_findByAdsUniqueId?ads_unique_id=LR02',
        type: 'POST',
        dataType: 'json',
    })
    .done(function(data){
        showbarsmRender(data, $('#showBar2'));
    });
	$.ajax({
        url: 'ev/placeCar_findByAdsUniqueId?ads_unique_id=LR03',
        type: 'POST',
        dataType: 'json',
    })
    .done(function(data){
        showbarsmRender(data, $('#showBar3'));
    });
    function showbarsmRender(data, el){
    	var tpl = '{{#PlaceCars}}<a href="cardetail.html?id={{car.id}}"><img src="adsPath/{{pic}}"></a>{{/PlaceCars}}';
    	tplRender(tpl, data, el);
    }
})


/*侧边栏信息*/
$(document).ready(function(){
	$.ajax({
        url: 'ev/placeArt_findByAdsUniqueId?ads_unique_id=CN01',
        type: 'POST',
        dataType: 'json',
    })
    .done(function(data){
		newsTplRender(data, $('#car-news'));
    });
	$.ajax({
        url: 'ev/placeArt_findByAdsUniqueId?ads_unique_id=CN02',
        type: 'POST',
        dataType: 'json',
    })
    .done(function(data){
		newsTplRender(data, $('#policy'));
    });
	$.ajax({
        url: 'ev/placeArt_findByAdsUniqueId?ads_unique_id=CN03',
        type: 'POST',
        dataType: 'json',
    })
    .done(function(data){
		newsTplRender(data, $('#guide'));
    });
	$.ajax({
        url: 'ev/placeArt_findByAdsUniqueId?ads_unique_id=CN04',
        type: 'POST',
        dataType: 'json',
    })
    .done(function(data){
		newsTplRender(data, $('#tips'));
    });
    function newsTplRender(data, el){
    	var articles = data.response.data.PlaceArts;
    	for (var i = 0; i < articles.length; i++) {
	    	var str = articles[i].article.publish_time;
	    	var date = new Date(Date.parse(str));
	    	var publishTime = date.toLocaleDateString();
	    	articles[i].article.publish_time = publishTime;
    	}
       	var newsTpl = '<ul class="msg-list">{{#PlaceArts}}<li class="side-list-item"><a href="uploadPath/{{article.content}}">{{article.title}}</a><span class="date">{{article.publish_time}}</span></li>{{/PlaceArts}}</ul>';
       	tplRender(newsTpl, data, el);
    }
})



function entersearch(){
    var event = window.event || arguments.callee.caller.arguments[0];
    if (event.keyCode == 13) {
        $('.search-btn').trigger('click');
    }
}



function tplRender(tpl, data, el){
	var data = data.response.data;
	var content = Mustache.render(tpl, data);
	el.html(content);
}

function getArgs(){
    var args = {};
    var match = null;
    var search = decodeURIComponent(location.search.substring(1));
    var reg = /(?:([^&]+)=([^&]+))/g;
    while((match = reg.exec(search))!==null){
        args[match[1]] = match[2];
    }
    return args;
}
function trim(str){
    str = str.replace(/^(\s|\u00A0)+/,'');   
    for(var i=str.length-1; i>=0; i--){   
        if(/\S/.test(str.charAt(i))){   
            str = str.substring(0, i+1);   
            break;   
        }   
    }   
    return str;   
}

	
</script>
</body>
</html>
